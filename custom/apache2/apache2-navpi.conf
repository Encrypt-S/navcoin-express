<VirtualHost *:80>
        ServerAdmin webmaster@localhost
        RewriteEngine On
        RewriteCond %{HTTPS} !=on
        RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L]
</VirtualHost>

<VirtualHost *:443>

        ServerAdmin webmaster@localhost
        DocumentRoot /opt/navcoin-angular/

        SSLEngine on

        SSLCertificateFile /etc/apache2/ssl/navpi-ssl.crt
        SSLCertificateKeyFile /etc/apache2/ssl/navpi-ssl.key

        <Directory /home/stakebox/UI/>
                Options Indexes FollowSymLinks
                AllowOverride All
                Require ip 192.168
                Require ip 10.0
                Require ip 172.16
                Require ip 127.0.0.1
        </Directory>

        <FilesMatch "\.(cgi|shtml|phtml|php)$">
                SSLOptions +StdEnvVars
        </FilesMatch>

        <Directory /usr/lib/cgi-bin>
                SSLOptions +StdEnvVars
        </Directory>

        BrowserMatch "MSIE [2-6]" \
                        nokeepalive ssl-unclean-shutdown \
                        downgrade-1.0 force-response-1.0
        # MSIE 7 and newer should be able to use keepalive
        BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown

        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost>
